
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Development &#8212; MECADOI  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MECADOI workflow" href="workflow.html" />
    <link rel="prev" title="Configuration" href="configuration.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="development">
<h1>Development<a class="headerlink" href="#development" title="Permalink to this heading">¶</a></h1>
<p>Run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements/dev.txt</span></code> to install all development dependencies.</p>
<p>Continuous Integration is run with a Github Actions workflow that is defined in <code class="docutils literal notranslate"><span class="pre">.github/workflows/unit-tests.yml</span></code>.
This workflow lints and tests the application.</p>
<section id="linting">
<h2>Linting<a class="headerlink" href="#linting" title="Permalink to this heading">¶</a></h2>
<p>Checking the code style, formatting, and types is performed with <a class="reference external" href="https://flake8.pycqa.org/">flake8</a>, <a class="reference external" href="https://black.readthedocs.io/">black</a>, and <a class="reference external" href="https://mypy.readthedocs.io/">mypy</a>, respectively.</p>
<p><code class="docutils literal notranslate"><span class="pre">scripts/lint.sh</span></code> runs the three tools in succession.
Run <code class="docutils literal notranslate"><span class="pre">black</span> <span class="pre">./mecadoi</span> <span class="pre">./tests</span></code> to auto-format all code.</p>
<p>Configuration for flake8 and mypy is in the <code class="docutils literal notranslate"><span class="pre">.flake8</span></code> and <code class="docutils literal notranslate"><span class="pre">mypy.ini</span></code> files.</p>
</section>
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this heading">¶</a></h2>
<p>Tests are located in the <code class="docutils literal notranslate"><span class="pre">tests</span></code> folder, test data (including the contents of some sample MECA archives) in <code class="docutils literal notranslate"><span class="pre">tests/resources</span></code>.</p>
<p>To run all tests:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 -m unittest
</pre></div>
</div>
</section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this heading">¶</a></h2>
<p>Documentation source files are located in the <code class="docutils literal notranslate"><span class="pre">docs</span></code> folder.
The documentation is built with <a class="reference external" href="https://www.sphinx-doc.org/">sphinx</a>.</p>
<p>First, install all dependencies to build the documentation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -r requirements/docs.txt
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">docs</span></code> contains a Makefile to build or clean the documentation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> docs
make clean
make html
</pre></div>
</div>
<p>The HTML build output is located in <code class="docutils literal notranslate"><span class="pre">docs/_build/html</span></code>.</p>
</section>
<section id="crossref-sandbox">
<h2>Crossref sandbox<a class="headerlink" href="#crossref-sandbox" title="Permalink to this heading">¶</a></h2>
<p>If you want to test the full workflow of the application including DOI creation and you have a membership, CrossRef provides a <a class="reference external" href="https://test.crossref.org/">sandbox environment</a>.
This environment requires a different set of credentials than the usual account credentials.</p>
<p>The sandbox also does not seem to be kept in sync with the production environment, there seems to be no way to query its contents, and when creating DOIs for reviews and replies these must be linked to an existing DOI.</p>
<p>Therefore, before being able to create DOIs for peer reviews, you need create a DOI for an article.
Then, use that DOI as the preprint DOI in the test MECA and run the MECADOI workflow.
Only then will creating DOIs for all reviews and replies in the test MECA work.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">MECADOI</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#linting">Linting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#crossref-sandbox">Crossref sandbox</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">MECADOI workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="project.html">Project Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="configuration.html" title="previous chapter">Configuration</a></li>
      <li>Next: <a href="workflow.html" title="next chapter">MECADOI workflow</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, SourceData.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/development.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>